{"version":3,"sources":["../../../../.tmp-es/components/lookup/private/menu.jsx"],"names":["React","PropTypes","Item","displayName","propTypes","boldRegex","instanceOf","RegExp","emptyMessage","oneOfType","string","element","filterWith","func","focusIndex","number","getListLength","iconCategory","items","array","label","listLength","searchTerm","setFocus","defaultProps","Menu","props","itemIndex","itemHeight","listRef","scrollTop","state","filteredItems","prevProps","childFilter","child","className","indexOf","list","slice","call","children","filter","length","setState","i","item","result","forEach","index","data","type","nextItem","push","filterEmptySections","renderItems","footer","header","map","component","id","isActive","sectionDividerRenderer","SectionDivider","handleItemFocus","iconInverse","iconName","listItemLabelRenderer","onSelect","sectionDivider","renderHeader","renderContent","renderFooter","Component"],"mappings":"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","sourcesContent":["/* eslint-disable react/sort-comp */\n/* eslint-disable prefer-destructuring */\n/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Item from './item';\n\n/* eslint-disable react/no-did-update-set-state */\n\nconst displayName = 'Lookup-Menu';\nconst propTypes = {\n\tboldRegex: PropTypes.instanceOf(RegExp),\n\temptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n\tfilterWith: PropTypes.func,\n\tfocusIndex: PropTypes.number,\n\tgetListLength: PropTypes.func,\n\ticonCategory: PropTypes.string,\n\titems: PropTypes.array,\n\tlabel: PropTypes.string,\n\tlistLength: PropTypes.number,\n\tsearchTerm: PropTypes.string,\n\tsetFocus: PropTypes.func,\n};\nconst defaultProps = {\n\temptyMessage: 'No matches found.',\n};\nclass Menu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { filteredItems: this.filteredItems() };\n\t}\n\n\t// Set filtered list length in parent to determine active indexes for aria-activedescendent\n\tcomponentDidUpdate(prevProps) {\n\t\t// make an array of the children of the list but only count the actual items (but include section dividers)\n\t\tconst childFilter = (child) =>\n\t\t\tchild.className.indexOf('js-slds-lookup__item') > -1 ||\n\t\t\tchild.className.indexOf('slds-lookup__divider') > -1;\n\t\tconst list = [].slice.call(this.listRef.children).filter(childFilter)\n\t\t\t.length;\n\t\tthis.props.getListLength(list);\n\t\tif (\n\t\t\tprevProps.items !== this.props.items ||\n\t\t\tprevProps.filter !== this.props.filter ||\n\t\t\tprevProps.searchTerm !== this.props.searchTerm\n\t\t) {\n\t\t\t// eslint-disable-next-line class-methods-use-this\n\t\t\tthis.setState({\n\t\t\t\tfilteredItems: this.filteredItems(),\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFilteredItemForIndex(i) {\n\t\tif (\n\t\t\ti > -1 &&\n\t\t\tthis.state.filteredItems &&\n\t\t\ti < this.state.filteredItems.length\n\t\t) {\n\t\t\treturn this.state.filteredItems[i];\n\t\t}\n\t\treturn null;\n\t}\n\n\tfilter(item) {\n\t\treturn this.props.filterWith(this.props.searchTerm, item);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tfilterEmptySections(items) {\n\t\tconst result = [];\n\t\titems.forEach((item, index) => {\n\t\t\tif (item && item.data && item.data.type === 'section') {\n\t\t\t\tif (index + 1 < items.length) {\n\t\t\t\t\tconst nextItem = items[index + 1];\n\t\t\t\t\tif (nextItem.data && nextItem.data.type !== 'section') {\n\t\t\t\t\t\t// eslint-disable-next-line fp/no-mutating-methods\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line fp/no-mutating-methods\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tfilteredItems() {\n\t\treturn this.filterEmptySections(this.props.items.filter(this.filter, this));\n\t}\n\n\t// Scroll menu up/down when using mouse keys\n\thandleItemFocus = (itemIndex, itemHeight) => {\n\t\tif (this.listRef) {\n\t\t\tthis.listRef.scrollTop = itemIndex * itemHeight;\n\t\t}\n\t};\n\n\trenderContent() {\n\t\tif (this.state.filteredItems.length === 0) {\n\t\t\treturn (\n\t\t\t\t<li className=\"slds-lookup__message\" aria-live=\"polite\">\n\t\t\t\t\t<span className=\"slds-m-left_x-large slds-p-vertical_medium\">\n\t\t\t\t\t\t{this.props.emptyMessage}\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t);\n\t\t}\n\n\t\treturn this.renderItems();\n\t}\n\n\trenderFooter() {\n\t\treturn this.props.footer;\n\t}\n\n\trenderHeader() {\n\t\treturn this.props.header;\n\t}\n\n\trenderItems() {\n\t\tconst focusIndex = this.props.focusIndex;\n\t\treturn this.state.filteredItems.map((component, i) => {\n\t\t\t// isActive means it is aria-activedescendant\n\t\t\tconst id = component.id;\n\t\t\tlet isActive = false;\n\t\t\tif (this.props.header) {\n\t\t\t\tisActive = focusIndex === i + 1;\n\t\t\t} else {\n\t\t\t\tisActive = focusIndex === i;\n\t\t\t}\n\t\t\tif (component.data.type === 'section') {\n\t\t\t\tif (this.props.sectionDividerRenderer) {\n\t\t\t\t\tconst SectionDivider = this.props.sectionDividerRenderer;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SectionDivider\n\t\t\t\t\t\t\tdata={component.data}\n\t\t\t\t\t\t\tkey={`section_header_${id}`}\n\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Item\n\t\t\t\t\tboldRegex={this.props.boldRegex}\n\t\t\t\t\tdata={component.data}\n\t\t\t\t\thandleItemFocus={this.handleItemFocus}\n\t\t\t\t\ticonCategory={this.props.iconCategory}\n\t\t\t\t\ticonInverse={this.props.iconInverse}\n\t\t\t\t\ticonName={this.props.iconName}\n\t\t\t\t\tid={id}\n\t\t\t\t\tindex={i}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tlistItemLabelRenderer={this.props.listItemLabelRenderer}\n\t\t\t\t\tonSelect={this.props.onSelect}\n\t\t\t\t\tsearchTerm={this.props.searchTerm}\n\t\t\t\t\tsetFocus={this.props.setFocus}\n\t\t\t\t>\n\t\t\t\t\t{component}\n\t\t\t\t</Item>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSectionDivider() {\n\t\treturn this.props.sectionDivider;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<section id=\"menuContainer\" className=\"ignore-react-onclickoutside\">\n\t\t\t\t{this.renderHeader()}\n\t\t\t\t<ul\n\t\t\t\t\tid=\"list\"\n\t\t\t\t\tclassName=\"slds-lookup__list\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\tref={(list) => {\n\t\t\t\t\t\tif (list) {\n\t\t\t\t\t\t\tthis.listRef = list;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.renderContent()}\n\t\t\t\t</ul>\n\t\t\t\t{this.renderFooter()}\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nMenu.displayName = displayName;\nMenu.propTypes = propTypes;\nMenu.defaultProps = defaultProps;\n\nexport default Menu;\n"],"file":"menu.js"}