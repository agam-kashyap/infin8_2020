{"version":3,"sources":["../../../../.tmp-es/components/pill-container/private/selected-listbox.jsx"],"names":["React","PropTypes","classNames","Avatar","Icon","Pill","isReactComponent","propTypes","activeOption","object","activeOptionIndex","number","assistiveText","shape","label","string","removePill","selectedListboxLabel","className","oneOfType","array","events","onClickPill","func","isRequired","onPillFocus","onRequestFocus","onRequestFocusOnNextPill","onRequestFocusOnPreviousPill","onRequestRemove","id","isBare","bool","isInline","isPillContainer","labels","remove","title","renderAtSelectionLength","selectedListboxRef","selection","style","listboxHasFocus","variant","oneOf","defaultProps","getAvatar","option","avatarObject","avatar","HTMLElement","imgSrc","getIcon","iconObject","icon","category","name","SelectedListBox","props","length","undefined","ref","map","renderIndex","hasTabIndex","bare","error","onBlur","onBlurPill","onClick","event","data","index","onFocus","removeTitle","removePillTitle","displayName"],"mappings":"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","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport classNames from 'classnames';\n\nimport Avatar from '../../avatar';\nimport Icon from '../../icon';\nimport Pill from '../../utilities/pill';\n\nimport isReactComponent from '../../../utilities/is-react-component';\n\nconst propTypes = {\n\t/*\n\t * The option object within the selection prop that should have focus.\n\t */\n\tactiveOption: PropTypes.object,\n\t/*\n\t * The index of the option object within the selection prop that should have focus.\n\t */\n\tactiveOptionIndex: PropTypes.number,\n\t/**\n\t * **Assistive text for accessibility**\n\t * This object is merged with the default props object on every render.\n\t * * `label`: This is used as a visually hidden label if, no `labels.label` is provided.\n\t * * `removePill`: Aids in keyboard interaction with Pills.\n\t * * `selectedListboxLabel`: Used to identify the listbox\n\t */\n\tassistiveText: PropTypes.shape({\n\t\tlabel: PropTypes.string,\n\t\tremovePill: PropTypes.string,\n\t\tselectedListboxLabel: PropTypes.string,\n\t}),\n\t/**\n\t * CSS classes to be added to the top-level `div` tag.\n\t */\n\tclassName: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/*\n\t * Callbacks for various pill events such as click, focus, etc\n\t */\n\tevents: PropTypes.shape({\n\t\tonClickPill: PropTypes.func.isRequired,\n\t\tonPillFocus: PropTypes.func.isRequired,\n\t\tonRequestFocus: PropTypes.func.isRequired,\n\t\tonRequestFocusOnNextPill: PropTypes.func.isRequired,\n\t\tonRequestFocusOnPreviousPill: PropTypes.func.isRequired,\n\t\tonRequestRemove: PropTypes.func.isRequired,\n\t}),\n\t/**\n\t * HTML id for component main container\n\t */\n\tid: PropTypes.string,\n\t/**\n\t * Determines whether component renders as a bare pill container with associated styling for child pills\n\t */\n\tisBare: PropTypes.bool,\n\t/**\n\t * Adds inline (inside of input) styling\n\t */\n\tisInline: PropTypes.bool,\n\t/**\n\t * Determines whether component renders as a pill container with associated styling and behavior\n\t */\n\tisPillContainer: PropTypes.bool,\n\t/*\n\t * Pill Label\n\t */\n\tlabels: PropTypes.shape({\n\t\tlabel: PropTypes.string,\n\t\tremove: PropTypes.string,\n\t\ttitle: PropTypes.string,\n\t}),\n\t/**\n\t * Changes styles of the input. Currently `entity` is not supported.\n\t */\n\trenderAtSelectionLength: PropTypes.number,\n\t/**\n\t * This callback exposes the selected listbox reference / DOM node to parent components.\n\t */\n\tselectedListboxRef: PropTypes.func,\n\t/**\n\t * Accepts an array of item objects.\n\t */\n\tselection: PropTypes.array,\n\t/**\n\t * Custom styles to be passed to the top-level `div` tag\n\t */\n\tstyle: PropTypes.object,\n\t/**\n\t * Requests that the active option set focus on render\n\t */\n\tlistboxHasFocus: PropTypes.bool,\n\t/**\n\t * Changes styles of the input. Currently `entity` is not supported.\n\t */\n\tvariant: PropTypes.oneOf(['base', 'inline-listbox', 'readonly']),\n};\n\nconst defaultProps = {\n\trenderAtSelectionLength: 1,\n};\n\nconst getAvatar = (option) => {\n\tconst avatarObject = option.avatar;\n\tlet avatar = null;\n\n\tif (avatarObject) {\n\t\tif (isReactComponent(avatarObject) || avatarObject instanceof HTMLElement) {\n\t\t\tavatar = avatarObject;\n\t\t} else if (avatarObject.imgSrc) {\n\t\t\tavatar = (\n\t\t\t\t<Avatar\n\t\t\t\t\timgSrc={avatarObject.imgSrc}\n\t\t\t\t\ttitle={avatarObject.title || option.label}\n\t\t\t\t\tvariant={avatarObject.variant || 'user'}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn avatar;\n};\n\nconst getIcon = (option) => {\n\tconst iconObject = option.icon;\n\tlet icon = null;\n\n\tif (iconObject) {\n\t\tif (isReactComponent(iconObject) || iconObject instanceof HTMLElement) {\n\t\t\ticon = iconObject;\n\t\t} else if (iconObject.category && iconObject.name) {\n\t\t\ticon = (\n\t\t\t\t<Icon\n\t\t\t\t\tcategory={iconObject.category}\n\t\t\t\t\tname={iconObject.name}\n\t\t\t\t\ttitle={iconObject.title || option.label}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn icon;\n};\n\nconst SelectedListBox = (props) =>\n\tprops.selection.length >= props.renderAtSelectionLength ? (\n\t\t<div // eslint-disable-line jsx-a11y/role-supports-aria-props\n\t\t\tclassName={\n\t\t\t\tclassNames(\n\t\t\t\t\t{\n\t\t\t\t\t\t'slds-pill_container': props.isPillContainer,\n\t\t\t\t\t},\n\t\t\t\t\tprops.className\n\t\t\t\t) || undefined\n\t\t\t}\n\t\t\tid={props.id}\n\t\t\tref={(ref) => {\n\t\t\t\tif (props.selectedListboxRef) {\n\t\t\t\t\tprops.selectedListboxRef(ref);\n\t\t\t\t}\n\t\t\t}}\n\t\t\trole=\"listbox\"\n\t\t\tstyle={props.style}\n\t\t\taria-orientation=\"horizontal\"\n\t\t>\n\t\t\t<ul\n\t\t\t\tclassName={classNames('slds-listbox', {\n\t\t\t\t\t'slds-listbox_inline': props.isInline,\n\t\t\t\t\t'slds-listbox_horizontal': !props.isInline,\n\t\t\t\t\t'slds-p-top_xxx-small': !props.isInline,\n\t\t\t\t})}\n\t\t\t\trole=\"group\"\n\t\t\t\taria-label={props.assistiveText.selectedListboxLabel}\n\t\t\t>\n\t\t\t\t{props.selection.map((option, renderIndex) => {\n\t\t\t\t\tconst hasTabIndex = renderIndex === props.activeOptionIndex;\n\t\t\t\t\tconst icon = getIcon(option);\n\t\t\t\t\tconst avatar = !icon ? getAvatar(option) : null;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\t\t\tclassName=\"slds-listbox__item\"\n\t\t\t\t\t\t\tkey={`${props.id}-list-item-${option.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Pill\n\t\t\t\t\t\t\t\tactive={hasTabIndex && props.listboxHasFocus}\n\t\t\t\t\t\t\t\tassistiveText={{\n\t\t\t\t\t\t\t\t\tremove: props.assistiveText.removePill,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tavatar={avatar}\n\t\t\t\t\t\t\t\tbare={option.bare || props.isBare}\n\t\t\t\t\t\t\t\terror={option.error}\n\t\t\t\t\t\t\t\tevents={{\n\t\t\t\t\t\t\t\t\tonBlur: props.events.onBlurPill,\n\t\t\t\t\t\t\t\t\tonClick: (event, data) => {\n\t\t\t\t\t\t\t\t\t\tprops.events.onClickPill(event, {\n\t\t\t\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t\t\t\tindex: renderIndex,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonFocus: props.events.onPillFocus,\n\t\t\t\t\t\t\t\t\tonRequestFocusOnNextPill:\n\t\t\t\t\t\t\t\t\t\tprops.events.onRequestFocusOnNextPill,\n\t\t\t\t\t\t\t\t\tonRequestFocusOnPreviousPill:\n\t\t\t\t\t\t\t\t\t\tprops.events.onRequestFocusOnPreviousPill,\n\t\t\t\t\t\t\t\t\tonRequestRemove: (event, data) => {\n\t\t\t\t\t\t\t\t\t\tprops.events.onRequestRemove(event, {\n\t\t\t\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t\t\t\tindex: renderIndex,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonRequestFocus: props.events.onRequestFocus,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\teventData={{ option }}\n\t\t\t\t\t\t\t\thasError={option.error}\n\t\t\t\t\t\t\t\ticon={icon}\n\t\t\t\t\t\t\t\tlabels={{\n\t\t\t\t\t\t\t\t\tlabel: option.label,\n\t\t\t\t\t\t\t\t\tremoveTitle: props.labels.removePillTitle,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\trequestFocus={props.listboxHasFocus}\n\t\t\t\t\t\t\t\ttabIndex={hasTabIndex ? 0 : -1}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</div>\n\t) : null;\n\nSelectedListBox.displayName = 'SelectedListBox';\nSelectedListBox.propTypes = propTypes;\nSelectedListBox.defaultProps = defaultProps;\n\nexport default SelectedListBox;\n"],"file":"selected-listbox.js"}