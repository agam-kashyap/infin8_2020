{"version":3,"sources":["../../../.tmp-es/components/accordion/index.jsx"],"names":["React","Component","PropTypes","classNames","shortid","ACCORDION","propTypes","className","oneOfType","array","object","string","id","number","children","node","isRequired","Accordion","props","state","currButtonIndex","summaryButtons","generatedId","generate","prevProps","prevState","focus","setState","e","buttonIndex","findIndex","el","target","key","preventDefault","length","button","btnInArr","find","undefined","push","Children","map","child","cloneElement","refs","summaryButton","addSummaryButton","bind","onClickSummary","onKeyDownSummary","displayName"],"mappings":"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","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n// Implements the [Accordion design\n// pattern](https://www.lightningdesignsystem.com/components/accordion/) in\n// React. Based on SLDS v2.4.3\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shortid from 'shortid';\n\nimport { ACCORDION } from '../../utilities/constants';\n\nconst propTypes = {\n\t/**\n\t * CSS class names to be added to the accordion component. _Tested with snapshot testing._\n\t */\n\tclassName: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\t/**\n\t * HTML id for accordion component. _Tested with snapshot testing._\n\t */\n\tid: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\t/**\n\t * The panel content for the Accordion component. Accordion panels should be added as <AccordionPanel />. Event handler for the accordion panels should be added to `<AccordionPanel />`. Optional `panelContentActions` component may be passed as prop. _Tested with Mocha framework and snapshot testing._\n\t *\n\t * Example:\n\t * ```\n\t * <SLDSAccordion>\n\t *   <SLDSAccordionpanel />\n\t *   <SLDSAccordionpanel />\n\t *   <SLDSAccordionpanel />\n\t * </SLDSAccordion>\n\t * ```\n\t */\n\tchildren: PropTypes.node.isRequired,\n};\n\n/**\n * An accordion allows a user to toggle the display of sections of content.\n * The accordion component wraps accordion panels that can be selected and expanded. It accepts children to define the content displayed within.\n */\nclass Accordion extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { currButtonIndex: 0 };\n\t\tthis.summaryButtons = [];\n\t\tthis.generatedId = shortid.generate();\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (\n\t\t\tthis.state.currButtonIndex !== null &&\n\t\t\tthis.state.currButtonIndex !== prevState.currButtonIndex\n\t\t) {\n\t\t\tthis.summaryButtons[this.state.currButtonIndex].focus();\n\t\t}\n\t}\n\n\tonClickSummary() {\n\t\tthis.setState({ currButtonIndex: null });\n\t}\n\n\tonKeyDownSummary(e) {\n\t\tlet buttonIndex = this.state.currButtonIndex;\n\t\tif (buttonIndex === null) {\n\t\t\tbuttonIndex = this.summaryButtons.findIndex(\n\t\t\t\t(el) => el.id === e.target.id\n\t\t\t);\n\t\t}\n\n\t\tif (e.key === 'ArrowDown') {\n\t\t\te.preventDefault();\n\t\t\tif (buttonIndex < this.props.children.length - 1) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrButtonIndex: buttonIndex + 1,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({ currButtonIndex: 0 });\n\t\t\t}\n\t\t} else if (e.key === 'ArrowUp') {\n\t\t\te.preventDefault();\n\t\t\tif (buttonIndex > 0) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrButtonIndex: buttonIndex - 1,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({ currButtonIndex: this.props.children.length - 1 });\n\t\t\t}\n\t\t}\n\t}\n\n\taddSummaryButton(button) {\n\t\tconst btnInArr = this.summaryButtons.find((el) => button === el);\n\t\tif (button !== null && btnInArr === undefined) {\n\t\t\t// eslint-disable-next-line fp/no-mutating-methods\n\t\t\tthis.summaryButtons.push(button);\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<ul\n\t\t\t\tname={this.props.id || this.generatedId}\n\t\t\t\tclassName={classNames('slds-accordion', this.props.className)}\n\t\t\t>\n\t\t\t\t{React.Children.map(this.props.children, (child) =>\n\t\t\t\t\tReact.cloneElement(child, {\n\t\t\t\t\t\trefs: { summaryButton: this.addSummaryButton.bind(this) },\n\t\t\t\t\t\tonClickSummary: this.onClickSummary.bind(this),\n\t\t\t\t\t\tonKeyDownSummary: this.onKeyDownSummary.bind(this),\n\t\t\t\t\t})\n\t\t\t\t)}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nAccordion.displayName = ACCORDION;\nAccordion.propTypes = propTypes;\n\nexport default Accordion;\n"],"file":"index.js"}